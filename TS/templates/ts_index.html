{% load static %}
{% url 'ts:Dashboard' as dashboard_url %}
{% url 'ts:Statistics' as statistics_url %}
{% url 'ts:Tally' as tally_url %}
{% url 'ts:ViolationTickets' as tickets_url %}
{% url 'ts:AcademicYear' as settings_url %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block title %}{% endblock title %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.4/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-DQvkBjpPgn7RC31MCQoOeC9TI2kdqa4+BSgNMNj8v77fdC77Kj5zpWFTJaaAoMbC" crossorigin="anonymous">
</head>
<body>
    <!--NAVIGATION BAR-->
    <div class="sidebar">
        <a href="{% url 'ts:Dashboard' %}" class="sidebar-title"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 29 29" fill="none">
            <g clip-path="url(#clip0_348_3445)">
              <path d="M25.9336 1.74878H3.16672C1.44552 1.74878 0.050293 3.14427 0.050293 4.86547V24.2219C0.050293 25.9431 1.44552 27.3383 3.16672 27.3383H25.9339C27.6551 27.3383 29.0503 25.9431 29.0503 24.2219V4.86547C29.0503 3.14427 27.6551 1.74905 25.9339 1.74905L25.9336 1.74878ZM9.04781 19.0293C9.10071 19.0293 9.12756 19.0626 9.12756 19.1289V21.4017C9.12756 21.4548 9.10071 21.4814 9.04781 21.4814H2.60847C2.5553 21.4814 2.52872 21.4484 2.52872 21.3818L2.54886 7.68572C2.54886 7.63283 2.57544 7.60597 2.62861 7.60597H9.02794C9.08084 7.60597 9.10769 7.63927 9.10769 7.70559V9.93833C9.10769 9.99149 9.08084 10.0181 9.02794 10.0181H4.94109V13.1281H9.02794C9.08084 13.1281 9.10769 13.1549 9.10769 13.2078L9.12756 15.4604C9.12756 15.5136 9.10071 15.5402 9.04781 15.5402H4.94109V19.029H9.04781V19.0293ZM18.3579 7.68572L15.6467 21.3818C15.6332 21.4484 15.5999 21.4814 15.5468 21.4814H13.1347C13.0815 21.4814 13.0482 21.4484 13.035 21.3818L10.2838 7.68572C10.2704 7.63283 10.297 7.60597 10.3636 7.60597H12.6162C12.6691 7.60597 12.7026 7.63283 12.716 7.68572L14.3508 16.8164L15.9458 7.68572C15.9587 7.63283 15.9922 7.60597 16.0454 7.60597H18.2781C18.3445 7.60597 18.371 7.63283 18.3579 7.68572ZM26.0434 19.717C25.6911 20.3219 25.2191 20.8004 24.6278 21.1525C24.0362 21.5045 23.3819 21.6809 22.6641 21.6809C21.9464 21.6809 21.2914 21.498 20.7004 21.1326C20.1089 20.7671 19.6368 20.2822 19.2851 19.6772C18.9328 19.0725 18.7566 18.4047 18.7566 17.6738V16.7568C18.7566 16.6905 18.7897 16.6572 18.8565 16.6572H21.0893C21.1422 16.6572 21.169 16.6905 21.169 16.7568V17.6738C21.169 18.1123 21.3151 18.4882 21.6075 18.8002C21.8996 19.1128 22.2519 19.2688 22.6641 19.2688C23.0763 19.2688 23.4281 19.1093 23.7207 18.7903C24.0129 18.4713 24.1592 18.0994 24.1592 17.6741C24.1592 17.1824 23.8402 16.7571 23.2022 16.3981C22.9893 16.2783 22.6571 16.0925 22.2055 15.8398C21.7536 15.5874 21.3282 15.3482 20.9295 15.1221C20.1986 14.6967 19.6567 14.1621 19.3047 13.5171C18.9524 12.8727 18.7765 12.145 18.7765 11.3341C18.7765 10.59 18.9559 9.92195 19.3146 9.33067C19.6734 8.73939 20.1486 8.27083 20.7399 7.92524C21.3312 7.57993 21.9724 7.407 22.6638 7.407C23.3553 7.407 24.0158 7.58342 24.6077 7.93545C25.1989 8.28774 25.6707 8.75953 26.023 9.35081C26.375 9.94235 26.5515 10.6037 26.5515 11.3344V12.9691C26.5515 13.0223 26.5246 13.0488 26.4717 13.0488H24.239C24.1858 13.0488 24.1592 13.0223 24.1592 12.9691L24.1394 11.3344C24.1394 10.8693 23.993 10.4904 23.7006 10.198C23.4082 9.90583 23.0626 9.75949 22.6641 9.75949C22.2656 9.75949 21.8996 9.91577 21.6075 10.2281C21.3148 10.5406 21.169 10.9093 21.169 11.3346C21.169 11.76 21.2616 12.1388 21.448 12.431C21.6338 12.7234 21.9729 13.0027 22.4646 13.2682C22.5309 13.3082 22.6606 13.3778 22.8534 13.4774C23.0457 13.5773 23.2551 13.6903 23.4812 13.8163C23.707 13.9427 23.91 14.0526 24.0894 14.1452C24.2688 14.2384 24.3783 14.298 24.4183 14.3246C25.0827 14.697 25.6076 15.1519 25.9932 15.6903C26.3785 16.2284 26.5713 16.89 26.5713 17.6738C26.5713 18.4576 26.3949 19.1125 26.0432 19.7172L26.0434 19.717Z"
              fill="white"/>
            </g>
            <defs>
              <clipPath id="clip0_348_3445">
                <rect width="29" height="29" fill="white"/>
              </clipPath>
            </defs>
          </svg></i> 
          <span class="sidebar-title2">XU SSIO EVS<span></a>
        <div class="sidebar-content">
            <a href="{{ dashboard_url }}" class="{% if request.path == dashboard_url %}active{% endif %}"><i class='bx bx-home-alt'></i> Dashboard</a>
            <a href="#" class="{% if request.path == statistics_url %}active{% endif %}"><i class='bx bx-bar-chart'></i> Statistics</a>
            <a href="#" class="{% if request.path == tally_url %}active{% endif %}"><i class='bx bx-list-ul'></i> Tally</a>
            <a href="#" class="{% if request.path == tickets_url %}active{% endif %}"><i class='bx bx-table'></i> Tickets</a>
            <a href="#" class="{% if request.path == settings_url %}active{% endif %}"><i class='bx bx-cog'></i> Settings</a>
            <a href="#"><i class='bx bx-log-out'></i> Logout</a>
        </div>
    </div>
    <!--MAIN CONTENT-->
    <div class="main-content">
        <div class="header">
            {%block page_name %}{% endblock page_name %}
            <div class="text-end col-6" id="date-time-container">
                <div id="date"></div>
                <div id="time"></div>
            </div>
        </div>
        {% block content %}{% endblock content %}
</body>
{% block scripts %}{% endblock scripts%}
    <script>
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');
    
            sidebar.classList.toggle('show');
            mainContent.classList.toggle('expanded');
        }
        
        // Add hover functionality to sidebar
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');
            
            // Expand main content when sidebar is hovered
            sidebar.addEventListener('mouseenter', function() {
                if (!sidebar.classList.contains('show')) { // Only if not already toggled
                    mainContent.classList.add('expanded');
                }
            });
            
            // Return main content to normal when sidebar is not hovered
            sidebar.addEventListener('mouseleave', function() {
                if (!sidebar.classList.contains('show')) { // Only if not toggled
                    mainContent.classList.remove('expanded');
                }
            });
        });
    
        // Add event listeners to sidebar links
        document.querySelectorAll('.sidebar a').forEach(link => {
            link.addEventListener('click', function () {
                // Remove the 'active' class from all links
                document.querySelectorAll('.sidebar a').forEach(a => a.classList.remove('active'));
    
                // Add the 'active' class to the clicked link
                this.classList.add('active');
            });
        });

        function toggleDropdown() {
            const dropdown = document.getElementById('status-dropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }
        
        // Function to update the ID Status field @ticket-details ni sha 
        // TO BE EDITED
        function updateStatus(status) {
            const idStatusInput = document.getElementById('id-status');
            idStatusInput.value = status; // Update the input field value
            document.getElementById('status-dropdown').style.display = 'none'; // Hide the dropdown
        }
        
        function updateDateTime() {
            const now = new Date();
            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const timeOptions = { hour: '2-digit', minute: '2-digit'};
          
            const formattedDate = now.toLocaleDateString(undefined, dateOptions);
            const formattedTime = now.toLocaleTimeString(undefined, timeOptions);
          
            document.getElementById('date').textContent = formattedDate;
            document.getElementById('time').textContent = formattedTime;
          }

          updateDateTime();
          setInterval(updateDateTime, 1000);
    </script>
</html>








